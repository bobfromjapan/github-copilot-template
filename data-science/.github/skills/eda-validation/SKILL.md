---
name: eda-and-validation
description: EDAの実行と結果の要約(update_eda)、およびデータの特性に合わせた最適な交差検証戦略の設計(design_cross_validation)を行う際に使用します。
---

# EDA & Cross Validation Strategy

このスキルは、データセットの特性を深く理解し、外挿性の高い予測モデルを構築するために信頼性の高いローカル評価環境（Out-of-Fold: OOFの計算など）を構築するためのものです。

## When to use this skill

- プロジェクトの初期段階でデータの全体像を把握するとき
- 特徴量エンジニアリングの前段階として、変数の分布や相関を確認するとき
- モデルの評価スコアが安定せず、バリデーション手法（CV）の見直しが必要なとき

## Actions

### 1. update_eda (EDAの更新と要約)
1. `eda/eda.py`（またはJupyter Notebook）を実装し、以下の分析を行うコードを記述する。
   - 欠損値の確認と目的変数との関係
   - 数値変数の分布（ヒストグラム）とカテゴリ変数の偏り
   - 特徴量間の相関関係（相関行列など）
   - （時系列データの場合）時間経過に伴う目的変数の推移
2. （ユーザーがコードを実行した後）出力されたグラフやログを読み取る。
3. エージェント自身が今後の実装で参照しやすいように、分析結果の要点を箇条書きで `eda/data_facts.txt` に簡潔にまとめる。既存のファイルがある場合は、最新の情報に基づいて上書き・更新する。

### 2. design_cross_validation (交差検証戦略の設計)
1. `eda/data_facts.txt` を読み込み、データセットの特性（不均衡データ、時系列性、特定のグループやユーザーIDの偏りなど）を把握する。
2. データの特性に最も適したCV戦略（例: `StratifiedKFold`, `GroupKFold`, `TimeSeriesSplit` など）を決定する。
3. 決定したCV戦略に基づき、Kaggleで必須となるOOF（Out-of-Fold）予測を適切に計算・保存できるように、対象バージョンのデータ分割用コード（`preprocess.py` または `train.py`内）を実装・修正する。
4. なぜそのCV戦略を選択したのか、理由を対象バージョンの `memo.md` に記録する。